{"ast":null,"code":"var _jsxFileName = \"D:\\\\skiliopay-paylater-mvp\\\\frontend\\\\src\\\\pages\\\\DevScenarioDashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DevScenarioDashboard() {\n  _s();\n  const [scenarios, setScenarios] = useState([]);\n  const [activeScenario, setActiveScenario] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const fetchScenarios = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"/dev/scenarios\");\n      const data = await res.json();\n      setScenarios(data);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const selectScenario = async scenarioId => {\n    try {\n      const res = await fetch(\"/dev/scenario/select\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          scenarioId\n        })\n      });\n      const data = await res.json();\n      setActiveScenario((data === null || data === void 0 ? void 0 : data.scenario_id) || null);\n      // Quan trọng: fetch lại logs\n      setTimeout(() => fetchLogs(), 100);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const resetSeed = async () => {\n    try {\n      await fetch(\"/dev/reset\", {\n        method: \"POST\"\n      });\n      setActiveScenario(null);\n      setLogs([]); // reset logs ngay lập tức, sau đó fetch lại logs mới\n      setTimeout(() => fetchLogs(), 100);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const fetchLogs = async () => {\n    try {\n      const res = await fetch(\"/dev/logs\"); // giả sử endpoint trả về logs\n      const data = await res.json();\n      setLogs(data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  useEffect(() => {\n    fetchScenarios();\n    fetchLogs();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading scenarios...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 24\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Dev/Test Scenario Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetSeed,\n        style: {\n          marginRight: 8\n        },\n        children: \"Reset Seed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Available Scenarios\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: scenarios.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [s.scenario_id, \": \", s.description]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => selectScenario(s.scenario_id),\n            style: {\n              marginLeft: 8\n            },\n            disabled: activeScenario === s.scenario_id,\n            children: activeScenario === s.scenario_id ? \"Active\" : \"Select\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)]\n        }, s.scenario_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Activity Log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: logs.map((log, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"[\", log.timestamp, \"] \", log.action, \" \", log.detail ? `- ${log.detail}` : \"\"]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(DevScenarioDashboard, \"179zzWv1nSwn4t4tRTMy5lLo5Wk=\");\n_c = DevScenarioDashboard;\nvar _c;\n$RefreshReg$(_c, \"DevScenarioDashboard\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","DevScenarioDashboard","_s","scenarios","setScenarios","activeScenario","setActiveScenario","logs","setLogs","loading","setLoading","fetchScenarios","res","fetch","data","json","err","console","error","selectScenario","scenarioId","method","headers","body","JSON","stringify","scenario_id","setTimeout","fetchLogs","resetSeed","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","marginBottom","onClick","marginRight","map","s","description","marginLeft","disabled","log","idx","timestamp","action","detail","_c","$RefreshReg$"],"sources":["D:/skiliopay-paylater-mvp/frontend/src/pages/DevScenarioDashboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\ntype Scenario = {\r\n  scenario_id: string;\r\n  description: string;\r\n};\r\n\r\ntype LogEntry = {\r\n  timestamp: string;\r\n  action: string;\r\n  detail?: string;\r\n};\r\n\r\nexport default function DevScenarioDashboard() {\r\n  const [scenarios, setScenarios] = useState<Scenario[]>([]);\r\n  const [activeScenario, setActiveScenario] = useState<string | null>(null);\r\n  const [logs, setLogs] = useState<LogEntry[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchScenarios = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/dev/scenarios\");\r\n      const data = await res.json();\r\n      setScenarios(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectScenario = async (scenarioId: string) => {\r\n  try {\r\n    const res = await fetch(\"/dev/scenario/select\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ scenarioId }),\r\n    });\r\n    const data = await res.json();\r\n    setActiveScenario(data?.scenario_id || null);\r\n    // Quan trọng: fetch lại logs\r\n    setTimeout(() => fetchLogs(), 100);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nconst resetSeed = async () => {\r\n  try {\r\n    await fetch(\"/dev/reset\", { method: \"POST\" });\r\n    setActiveScenario(null);\r\n    setLogs([]); // reset logs ngay lập tức, sau đó fetch lại logs mới\r\n    setTimeout(() => fetchLogs(), 100);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\n\r\n  const fetchLogs = async () => {\r\n    try {\r\n      const res = await fetch(\"/dev/logs\"); // giả sử endpoint trả về logs\r\n      const data = await res.json();\r\n      setLogs(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchScenarios();\r\n    fetchLogs();\r\n  }, []);\r\n\r\n  if (loading) return <div>Loading scenarios...</div>;\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <h2>Dev/Test Scenario Dashboard</h2>\r\n\r\n      <div style={{ marginBottom: 16 }}>\r\n        <button onClick={resetSeed} style={{ marginRight: 8 }}>Reset Seed</button>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: 24 }}>\r\n        <h3>Available Scenarios</h3>\r\n        <ul>\r\n          {scenarios.map(s => (\r\n            <li key={s.scenario_id}>\r\n              <span>{s.scenario_id}: {s.description}</span>\r\n              <button\r\n                onClick={() => selectScenario(s.scenario_id)}\r\n                style={{ marginLeft: 8 }}\r\n                disabled={activeScenario === s.scenario_id}\r\n              >\r\n                {activeScenario === s.scenario_id ? \"Active\" : \"Select\"}\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      <div>\r\n        <h3>Activity Log</h3>\r\n        <ul>\r\n          {logs.map((log, idx) => (\r\n            <li key={idx}>\r\n              [{log.timestamp}] {log.action} {log.detail ? `- ${log.detail}` : \"\"}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}